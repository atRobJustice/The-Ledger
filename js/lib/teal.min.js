"use strict";window.teal={},window.$t=window.teal,teal.copyto=function(e,t){if(null==e||"object"!=typeof e)return e;if(e instanceof Array)for(var n=e.length-1;n>=0;--n)t[n]=$t.copy(e[n]);else for(var n in e)e.hasOwnProperty(n)&&(t[n]=$t.copy(e[n]));return t},teal.copy=function(e){return e?teal.copyto(e,new e.constructor):e},teal.element=function(e,t,n,r){var o=document.createElement(e);if(t)for(var i in t)o.setAttribute(i,t[i]);return n&&n.appendChild(o),void 0!==r&&$t.inner(r,o),o},teal.inner=function(e,t){return t.appendChild(null!=e.nodeName?e:document.createTextNode(e)),t},teal.id=function(e){return document.getElementById(e)},teal.set=function(e,t){for(var n in t)e.setAttribute(n,t[n]);return e},teal.clas=function(e,t,n){var r=t?t.split(/\s+/):[],o=n?n.split(/\s+/):[],i=(e.getAttribute("class")||"").split(/\s+/);for(var a in i[0]||(i=[]),r){var l=i.indexOf(r[a]);l>=0&&i.splice(l,1)}for(var a in o)o[a]&&i.indexOf(o[a])<0&&i.push(o[a]);e.setAttribute("class",i.join(" "))},teal.empty=function(e){if(e.childNodes)for(;e.childNodes.length;)e.removeChild(e.firstChild)},teal.remove=function(e){if(e)if(e.parentNode)e.parentNode.removeChild(e);else for(var t=e.length-1;t>=0;--t)e[t].parentNode.removeChild(e[t])},teal.bind=function(e,t,n,r){if(e)if(t.constructor===Array)for(var o in t)e.addEventListener(t[o],n,r||!1);else e.addEventListener(t,n,r||!1)},teal.unbind=function(e,t,n,r){if(t.constructor===Array)for(var o in t)e.removeEventListener(t[o],n,r||!1);else e.removeEventListener(t,n,r||!1)},teal.one=function(e,t,n,r){var o=function(i){n.call(this,i),teal.unbind(e,t,o,r)};teal.bind(e,t,o,r)},teal.raise_event=function(e,t,n,r){var o=document.createEvent("UIEvents");o.initEvent(t,null==n||n,null==r||r),e.dispatchEvent(o)},teal.raise=function(e,t,n,r,o){var i=document.createEvent("CustomEvent");i.initCustomEvent(t,r,o,n),e.dispatchEvent(i)},document.getElementsByClassName?teal.get_elements_by_class=function(e,t){return(t||document).getElementsByClassName(e)}:teal.get_elements_by_class=function(e,t){for(var n=(t=t||document).getElementsByTagName("*"),r=e.split(/\s+/),o=[],i=n.length-1;i>=0;--i)for(var a=r.length-1;a>=0;--a){var l=n[i].getAttribute("class");if(l&&-1!=l.search("\\b"+r[a]+"\\b")){o.push(n[i]);break}}return o},teal.rpc=function(e,t,n){var r=new XMLHttpRequest;r.open("post","f",!0),r.onreadystatechange=function(){4==r.readyState&&t.call(r,n?r.responseText:JSON.parse(r.responseText))},r.send(JSON.stringify(e))},teal.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},teal.get_url_params=function(){var e=window.location.search.substring(1).split("&"),t={};for(var n in e){var r=e[n].split("=");t[r[0]]=decodeURI(r[1])}return t},teal.get_mouse_coords=function(e){var t=e.changedTouches;return t?{x:t[0].clientX,y:t[0].clientY}:{x:e.clientX,y:e.clientY}},teal.deferred=function(){var e=!1,t=[],n=[];function r(){for(;t.length;)t.shift().apply(this,n)}return{promise:function(){return{then:function(e){var n=teal.deferred(),r=n.promise();return t.push((function(){var t=e.apply(this,arguments);t&&"done"in t?t.done(n.resolve):n.resolve.apply(this,arguments)})),r},done:function(n){return t.push(n),e&&r(),this},cancel:function(){t=[]}}},resolve:function(){e=!0,n=Array.prototype.slice.call(arguments,0),r()}}},teal.when=function(e){var t=teal.deferred(),n=e.length,r=0;0==n&&t.resolve();for(var o=0;o<n;++o)e[o].done((function(){++r==n&&t.resolve()}));return t.promise()};